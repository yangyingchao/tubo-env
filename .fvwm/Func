DestroyFunc             MoveAndGotoPage
AddToFunc               MoveAndGotoPage
+                       I GotoPage $*
+                       I MoveToPage $*

DestroyFunc             GotoPageAndFocus
AddToFunc               GotoPageAndFocus
+                       I GotoPage $*
+                       I Current (CurrentPage,!backgroundxterm*) Break
+                       I Prev (CurrentPage,AcceptsFocus) FlipFocus NoWarp

DestroyFunc             GotoRightPage
AddToFunc               GotoRightPage
+                       I GotoPage +1p 0
+                       I Current (CurrentPage,!backgroundxterm*) Break
+                       I Prev (CurrentPage,AcceptsFocus) FlipFocus NoWarp

DestroyFunc             GotoLeftPage
AddToFunc               GotoLeftPage
+                       I GotoPage -1p 0
+                       I Current (CurrentPage,!backgroundxterm*) Break
+                       I Prev (CurrentPage,AcceptsFocus) FlipFocus NoWarp


DestroyFunc             AutoHide
AddToFunc               AutoHide
+                       I ThisWindow ($0) Deschedule $[w.id]
+                       I TestRc (!Match) Deschedule -$[w.id]
+                       I ThisWindow ($0) ThisWindow (shaded) AutohideShow $1 $3
+                       I TestRc (!Match) All ($0, !shaded) AutohideHide $2 $3

DestroyFunc             AutohideShow
AddToFunc               AutohideShow
+                       I Schedule $0 -$[w.id] WindowShade $1 off
+                       I Schedule $0 -$[w.id] Raise
+                       I Schedule $0 -$[w.id] Deschedule $[w.id]
+                       I Schedule $0 -$[w.id] Deschedule -$[w.id]

DestroyFunc             AutohideHide
AddToFunc               AutohideHide
+                       I Schedule $0 $[w.id] WindowShade $1 on
+                       I Schedule $0 $[w.id] Deschedule $[w.id]
+                       I Schedule $0 $[w.id] Deschedule -$[w.id]

DestroyFunc             FuncDockLaunch
AddToFunc               FuncDockLaunch
+                       C Any ($1) Next ($1) WindowListFunc
+                       C TestRc (NoMatch) Exec $0
+                       H Any ($1) WindowList ($1) Rectangle +$2+$3 0 -100m CurrentAtEnd UseListSkip SortByClass NoCurrentDeskTitle
+                       D Exec $0

DestroyFunc             FuncFullScreen
AddtoFunc               FuncFullScreen
+                       I Current (State 0) Fullscreen-Stop
+                       I TestRc Current (Maximizable) Fullscreen-Start

DestroyFunc             Fullscreen-Start
AddtoFunc               Fullscreen-Start
+                       I WindowStyle NoTitle,HandleWidth 0,FixedSize,FixedPosition
+                       I Current (!Maximized) Maximize
+                       I ResizeMaximize 100 100
+                       I State 0 true

DestroyFunc             Fullscreen-Stop
AddtoFunc               Fullscreen-Stop
+                       I DestroyWindowStyle
+                       I State 0 false
+                       I Maximize


DestroyFunc             FuncFvwmIconifyTrue
AddToFunc               FuncFvwmIconifyTrue
+                       I All (AcceptsFocus CurrentPage !Iconic !Shaded, !FvwmButtons, !"xdaliclock" !"*Desk *" !"*Desk *" !"*FvwmDocker*") State 1

+                       I All (State 1) Iconify True

DestroyFunc             FuncFvwmIconifFalse
AddToFunc               FuncFvwmIconifyFalse
+                       I All (State 1) Iconify False

DestroyFunc             FuncFvwmIconifyToggle
AddToFunc               FuncFvwmIconifyToggle
+                       I FuncFvwmIconifyFalse
+                       I All (State 1) State 1 False
+                       I TestRc (NoMatch) FuncFvwmIconifyTrue


#################### Lock screen. ##############
DestroyFunc             FuncFvwmLockScreen
AddToFunc               FuncFvwmLockScreen
+                       I All (xscreensaver) Nop
+                       I TestRc (NoMatch) Exec xscreensaver -no-splash &
+                       I Exec xscreensaver-command -lock


DestroyFunc StartFunction
AddToFunc   StartFunction
+           I Exec exec fvwm-root --dither --retain-pixmap $[HOME]/.fvwm/wallpapers/default.jpg
+           I Module FvwmButtons  FvwmDock
+           I Module FvwmAnimate
+           I Module FvwmAuto FvwmAutoHide -menter FvwmDockerAutoEnter
+           I Module FvwmPager
+           I Exec exec xscreensaver
+           I Exec exec fcitx -d
+           I Exec exec pidgin
+           I Exec exec $[HOME]/.fvwm/tools/run_conky.sh



# fcitx and pidgin does not need to be killed: only one instance will be created.
DestroyFunc  ExitFunction
AddToFunc    ExitFunction
+            I KillModule FvwmButtons
+            I KillModule FvwmAnimate
+            I KillModule FvwmPager
+            I KillModule FvwmAuto


# make windowlists etc. warp pointer to the middle of
# the window instead of top left
AddToFunc               WindowListFunc
+                       I WarpToWindow 50 50

DestroyFunc             DeThumbnail
AddToFunc               DeThumbnail
+                       I Iconify off
+                       I DestroyWindowStyle

DestroyFunc             FuncMoveOrMaximize
AddToFunc               FuncMoveOrMaximize
+                       I Raise
+                       M Move
+                       D Maximize 100 100

DestroyFunc             FuncDestroyOnHold
AddToFunc               FuncDestroyOnHold
+                       C Schedule 100 Close
+                       H Destroy
+                       H Beep

Colorset                9 fg Black, Translucent White 75, hi Black, sh Black

DestroyFunc             ExitMenu
AddToFunc               ExitMenu
+                       I DestroyModuleConfig Exitmenu: *
+                       I *Exitmenu: Font "StringEncoding=utf-8:xft:Microsoft YaHei:Medium:Size=10:encoding=zh_CN.UTF-8"
+                       I *Exitmenu: ButtonFont "StringEncoding=utf-8:xft:Microsoft YaHei:Medium:Size=10:encoding=zh_CN.UTF-8"
+                       I *Exitmenu: Colorset 9
+                       I *Exitmenu: ItemColorset 9
+                       I *Exitmenu: Line center
+                       I *Exitmenu: Line center
+                       I *Exitmenu: Line center
+                       I *Exitmenu: Line center
+                       I *Exitmenu: Line center
+                       I *Exitmenu: Text "确认要退出么？"
+                       I *Exitmenu: Line center
+                       I *Exitmenu: Line center
+                       I *Exitmenu: Line center
+                       I *Exitmenu: Line center
+                       I *Exitmenu: Line center
+                       I *Exitmenu: Line center
+                       I *Exitmenu: Line center
+                       I *Exitmenu: Button quit " 重启" ^[
+                       I *Exitmenu: Command Exec sudo reboot
+                       I *Exitmenu: Button quit " 关机" ^[
+                       I *Exitmenu: Command Exec sudo halt
+                       I *Exitmenu: Button quit " 注销!" ^M
+                       I *Exitmenu: Command Quit
+                       I *Exitmenu: Line center
+                       I *Exitmenu: Button quit " 运行..." ^[
+                       I *Exitmenu: Command Exec grun
+                       I *Exitmenu: Button quit " 列出进程" ^[
+                       I *Exitmenu: Command Exec xterm  -fg green -bg black -e top
+                       I *Exitmenu: Line center
+                       I *Exitmenu: Button quit " 重新载入 fvwm" ^[
+                       I *Exitmenu: Command Restart
+                       I *Exitmenu: Button quit " 锁住屏幕" ^[
+                       I *Exitmenu: Command  Exec xscreensaver-command  -lock
+                       I *Exitmenu: Button quit " 取消" ^[
+                       I *Exitmenu: Command Nop
+                       I *Exitmenu: Line center
+                       I *Exitmenu: Line center
+                       I Module FvwmForm Exitmenu
Style                   "Exitmenu" NoTitle

DestroyFunc             Thumbnail
AddToFunc               Thumbnail
+                       I Raise
+                       I Iconify

